<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern Chatbot</title>
    <style>
        /* CSS styles for the chatbox */
        body {
            font-family: Arial, sans-serif;
        }

        #chatbox {
            max-width: 80%; /* Adjusted for desktop view */
            margin: 0 auto;
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 10px;
            background-color: #f0f0f0;
            overflow-y: auto;
            height: 300px;
        }

        .message {
            margin-bottom: 10px;
            padding: 10px;
            border-radius: 10px;
            font-size: 16px;
            max-width: 90%; /* Adjusted for desktop view */
        }

        .user-message {
            color: #007bff;
            background-color: #e6f2ff;
            float: right;
            clear: both; /* Added to fix floating issue */
        }

        .bot-message {
            color: #28a745;
            background-color: #e6ffe6;
            float: left;
            clear: both; /* Added to fix floating issue */
        }

        .typing-indicator {
            position: relative;
            display: inline-block;
            width: 20px;
            height: 20px;
            margin-left: 10px;
            background-color: transparent;
            overflow: hidden;
            animation: typing-indicator-animation 1s infinite ease-in-out;
        }

        .typing-dot {
            position: absolute;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background-color: #28a745;
            opacity: 0;
            animation: typing-dot-animation 1s infinite ease-in-out;
        }

        @keyframes typing-indicator-animation {
            0%, 50%, 100% { transform: translateX(0); }
            25% { transform: translateX(10px); }
        }

        @keyframes typing-dot-animation {
            0% { transform: translateY(-50%) scale(0); opacity: 1; }
            50% { opacity: 0.3; }
            100% { transform: translateY(-50%) scale(1); opacity: 1; }
        }

        @keyframes fadein {
            from { opacity: 0; }
            to   { opacity: 1; }
        }
    </style>
</head>
<body>
    <div id="chatbox">
        <!-- Chat messages will be displayed here -->
    </div>
    <input type="text" id="userInput" placeholder="Type your message...">
    <button onclick="sendMessage()">Send</button>

    <script>
        function sendMessage() {
            var userInput = document.getElementById("userInput").value;
            displayUserMessage(userInput);
            document.getElementById("userInput").value = "";

            setTimeout(function() {
                displayTypingIndicator();
                setTimeout(function() {
                    var aiResponse = getAIResponse(userInput);
                    hideTypingIndicator();
                    displayBotMessage(aiResponse);
                }, 1500);
            }, 500);
        }

        function displayUserMessage(message) {
            var messageElement = document.createElement("div");
            messageElement.classList.add("message");
            messageElement.classList.add("user-message");
            messageElement.textContent = "You: " + message;
            document.getElementById("chatbox").appendChild(messageElement);
            document.getElementById("chatbox").scrollTop = document.getElementById("chatbox").scrollHeight;
        }

        function displayBotMessage(message) {
            var messageElement = document.createElement("div");
            messageElement.classList.add("message");
            messageElement.classList.add("bot-message");
            messageElement.textContent = "Bot: " + message;
            document.getElementById("chatbox").appendChild(messageElement);
            document.getElementById("chatbox").scrollTop = document.getElementById("chatbox").scrollHeight;
        }

        function displayTypingIndicator() {
            var typingIndicator = document.createElement("div");
            typingIndicator.classList.add("message");
            typingIndicator.classList.add("bot-message");
            typingIndicator.innerHTML = "Bot: <span class='typing-indicator'><span class='typing-dot'></span><span class='typing-dot'></span><span class='typing-dot'></span></span>";
            document.getElementById("chatbox").appendChild(typingIndicator);
            document.getElementById("chatbox").scrollTop = document.getElementById("chatbox").scrollHeight;
        }

        function hideTypingIndicator() {
            var typingIndicator = document.querySelector(".typing-indicator");
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }

        function getAIResponse(userInput) {
            if (userInput.toLowerCase().includes("hi") || userInput.toLowerCase().includes("hello")) {
                return "Hello, how can I assist you?";
            } else if (userInput.toLowerCase().includes("how are you")) {
                return "I'm doing well, thank you for asking!";
            } else if (userInput.match(/^[\d+*/\-\s()]+$/)) {
                try {
                    var result = eval(userInput);
                    return "The result of " + userInput + " is " + result;
                } catch (error) {
                    return "Sorry, I couldn't calculate the result.";
                }
            } else {
                return "I'm sorry, I didn't understand that.";
            }
        }
    </script>
</body>
</html>
